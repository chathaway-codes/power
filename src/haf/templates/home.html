{% load compress %}
{% load verbatim %}
{% load url from future %}
<!doctype html>
<html lang="en" ng-app="haf">
<head>
  <title>POW-R :: New Graph</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% compress css %}
  <link href="{{ STATIC_URL }}bootstrap/css/bootstrap.css" rel="stylesheet" media="screen" type="text/css">
  <link href="{{ STATIC_URL }}bootstrap/css/bootstrap-responsive.css" rel="stylesheet" media="screen" type="text/css">
  <link href="{{ STATIC_URL }}css/powr.css" rel="stylesheet" type="text/css">
  <link href="{{ STATIC_URL }}components/jquery-ui/themes/ui-lightness/jquery-ui.css" rel="stylesheet" type="text/css">
  <link href="{{ STATIC_URL }}components/jqplot/jquery.jqplot.css" rel="stylesheet" type="text/css">
  <link href="{{ STATIC_URL }}components/intro.js/introjs.css" rel="stylesheet">
  {% endcompress %}

  <!-- This should not be compressed. Keep comments for prospective developers.... -->
  <script>
    // Global variables
    // This indicates the location of the "raw" API
    window.API_RAW = "{% url 'api_raw_top_level' api_name="raw" %}";
    // This indicates the location of all "static" files.
    //  Partials are stored under STATIC_URL/<app_name>/partials/
    //  and they will NOT be parsed by Django. 
    window.STATIC_URL = "{{ STATIC_URL }}";

    // Login URL
    window.LOGIN_URL = "{% url 'login' %}";
    window.LOGOUT_URL = "{% url 'logout' %}";
    window.LOGGED_IN = {{ user.is_authenticated|lower }};
  </script>

  <!-- Include the AngularJS stuff right away, because it is needed for everything... -->
  {% compress js %}
  <script src="{{ STATIC_URL }}components/bower-angular/angular.js"></script>
  <script src="{{ STATIC_URL }}components/bower-angular-resource/angular-resource.js"></script>
  <script src="{{ STATIC_URL }}components/jquery/jquery.js" type="text/javascript"></script>
  <script src="{{ STATIC_URL }}js/app.js"></script>
  <script src="{{ STATIC_URL }}js/controllers.js"></script>
  <script src="{{ STATIC_URL }}js/filters.js"></script>
  <script src="{{ STATIC_URL }}js/services.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}components/intro.js/intro.js"></script>
  {% endcompress %}

  <!-- For each app, include the bootstrap.js file -->
  {% comment %}
  {% for app in apps %}
    {% with app|add:"/bootstrap.html" as template %}
    {% include template %}
    {% endwith %}
  {% endfor %}
  {% endcomment %}
</head>

<body>
  <div class="container">

    <!-- <div class="masthead"> -->
      <div class="row-fluid">
        <div class="span8">
            <h3>POW-R</h3>
        </div><!-- /.span8 -->
        <div class="span4" ng-controller="LogoutCtrl">
            <a  ng-click="logout()" ng-show="loggedIn">Log out</a>
        </div><!-- /.span4 -->
        <h4 class="muted">Power Outlet Wireless Monitoring</h4>
      </div><!-- /.row-fluid -->
      <div class="navbar" ng-app="navList">
        <div class="navbar-inner">
          <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="nav-collapse collapse">
              <ul class="nav" ng-controller="NavCtrl">
                <li class="nav-item"><a href="#">Help</a></li>
                <li class="nav-item" ng-class="navClass('dashboard')"><a href="#/dashboard">Dashboard</a></li>
                <li ng-class="navClass('devices')" class="dropdown nav-item">
                  <a class="dropdown-toggle" data-toggle="dropdown">Devices <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#/devices">View Current Devices</a></li>
                    <li><a href="#/devices/new">Add a New Device</a></li>
                  </ul>
                </li>
                <li ng-class="navClass('graphs')" class="dropdown nav-item">
                  <a class="dropdown-toggle" data-toggle="dropdown" >Graphs <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#/graphs/">View Current Graphs</a></li>
                    <li><a href="#/graphs/new">Make a New Graph</a></li>
                    <li><a href="#">Export Graphs</a></li>
                  </ul>
                </li>
                <li ng-class="navClass('system')" class="dropdown nav-item">
                  <a class="dropdown-toggle" data-toggle="dropdown">System <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#/system/users">View Current Users</a></li>
                    <li><a href="#/system/users/new">Add a New User</a></li>
                  </ul>
                </li>
              </ul> <!-- /.nav --> 
            </div><!-- /.nav-collapse.collapse -->
          </div> <!-- /.container --> 
        </div> <!-- /.navbar-inner --> 
      </div> <!-- /.navbar --> 
    <!-- </div> <!-- /.masthead --> 
    
    <br />
    
    <div id="alerts"></div>

    <div class="container" ng-view></div>

    <hr>

    <div class="footer">
      <p>&copy; POW-R 2013</p>
    </div>
  </div><!-- /container -->

  <!-- Login modal -->
  <div id="loginModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby='loginModal' aria-hidden='true' ng-controller="LoginCtrl">
      <div class='modal-header'>
          <h3 id="modalLoginLabel">Login</h3>
      </div>
      <div class="modal-body">
            <form class="form-signin">
              {% csrf_token %}
              <h2 class="form-signin-heading">Please sign in</h2>
              {% verbatim %}
              <h3 style="color: red">{{ error }}</h3>
              {% endverbatim %}
              <input id="login-username" type="text" class="input-block-level" placeholder="Username" ng-model="form.username">
              <input type="password" class="input-block-level" placeholder="Password" ng-model="form.password">
              <button class="btn btn-large btn-primary" type="submit" ng-click="login()">Sign in</button>
            </form>
      </div>
  </div><!-- /.modal.fade -->

  <!-- Le javascript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <!-- JQuery, cause everyone <3's it  -->
  {% compress js %}
  <script src="{{ STATIC_URL }}components/jquery-cookie/jquery.cookie.js" type="text/javascript"></script>
  <!-- Bootstrap  -->
  <script src="{{ STATIC_URL }}bootstrap/js/bootstrap.js" type="text/javascript"></script>
  <script src="{{ STATIC_URL }}bootstrap/js/bootstrap-collapse.js" type="text/javascript"></script>
  <!-- <script src="{{ STATIC_URL }}components/twitter-bootstrap-hover-dropdown/twitter-bootstrap-hover-dropdown.js" type="text/javascript"></script> -->
  <!-- JQPlot -->
  <script type="text/javascript" src="{{ STATIC_URL }}components/jqplot/jquery.jqplot.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}components/jqplot/plugins/jqplot.barRenderer.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}components/jqplot/plugins/jqplot.categoryAxisRenderer.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}components/jqplot/plugins/jqplot.pointLabels.js"></script>
  <!-- JQuery UI and Date Picker -->
  <script type="text/javascript" src="{{ STATIC_URL }}components/jquery-ui/ui/jquery.ui.core.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}components/jquery-ui/ui/jquery.ui.datepicker.js"></script>
  <!-- <script type="text/javascript" src="{{ STATIC_URL }}components/jquery-ui/ui/jquery.ui.slider.js"></script> -->
  <script type="text/javascript" src="{{ STATIC_URL }}components/jquery-timepicker-addon/jquery-ui-timepicker-addon.js"></script>
  <!-- Intro.js stuff 
  <script type="text/javascript" src="{{ STATIC_URL }}components/intro.js/intro.js"></script>
  -->
  {% endcompress %}

</body>
</html>
